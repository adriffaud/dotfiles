# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...
# Needed for some tools like SDKMAN
setopt clobber
unsetopt PATH_DIRS

distribution=$(grep -w ID /etc/os-release | cut -d= -f2)

alias gst="git status"

#export TERM="screen-256color"
alias ssh="TERM=xterm-256color ssh"
alias vim="nvim"

# Changing "ls" to "exa"
alias ls='exa -l --color=always --group-directories-first' # my preferred listing
alias la='exa -a --color=always --group-directories-first'  # all files and dirs
alias ll='exa -l --color=always --group-directories-first'  # long format
alias lt='exa -aT --color=always --group-directories-first' # tree listing

alias cat='bat'

unalias gdu

export EDITOR="vim"
export VISUAL="vim"
export AWS_VAULT_BACKEND="pass"
export ERL_AFLAGS="-kernel shell_history enabled"
export GOPATH=$HOME/dev/Go
export PATH=$PATH:$HOME/.local/bin:$HOME/bin:/usr/local/go/bin:$GOPATH/bin:$HOME/.emacs.d/bin:$HOME/.krew/bin

function print_colors() {
  for i in {0..15} ; do
    printf "\x1b[48;5;%sm%3d\e[0m " "$i" "$i"
    if (( i == 15 )) || (( i > 15 )) && (( (i-15) % 6 == 0 )); then
        printf "\n";
    fi
  done
}

# Load private customizations
if [ -f ~/.shell_private ]; then
  source ~/.shell_private
fi

if [[ -n "${WSL_DISTRO_NAME+x}" ]]; then
  source ~/.wsl2_ssh_pageant
fi

if [ "$distribution" = "linuxmint" ]; then
  export GPG_TTY="$(tty)"
  export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)
  gpgconf --launch gpg-agent
fi

. $HOME/.asdf/asdf.sh

fpath=(${ASDF_DIR}/completions $fpath)
autoload -Uz compinit && compinit

if command -v apt &> /dev/null; then
  source /usr/share/doc/fzf/examples/key-bindings.zsh
  source /usr/share/doc/fzf/examples/completion.zsh
  export FZF_ALT_C_COMMAND='fdfind -t d'
fi

eval "$(starship init zsh)"

source <(kubectl completion zsh)
alias k=kubectl

source <(minikube completion zsh)
alias mk=minikube

source <(helm completion zsh)
alias h=helm

source <(k3d completion zsh)
source <(chezmoi completion zsh)

alias tf=terraform

complete -F __start_kubectl k
complete -F __start_minikube mk
complete -F __start_helm h
